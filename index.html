<!DOCTYPE html5>
<html lang="en">

<head>
	<title>Infomation</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<style>
		* {
			padding: 0;
			margin: 0;
			box-sizing: border-box;
		}

		body {
			height: 100%;
			font-family: "Manrope", sans-serif;
			margin: 0;
			background-color: #fff;
			font-size: 14px;
		}

		select {
			border: none;
			text-indent: 1px;
			text-overflow: '';
			appearance: none;
		}

		select:focus {
			border: none;
			outline: none;
		}

		input {
			outline: none;
			border: none;
		}

		input[type="date"],
		input[type="datetime-local"] {
			-webkit-appearance: none;
			-moz-appearance: none;
			appearance: none;
			display: inline-flex;
		}

		input[type="date"]::-webkit-inner-spin-button,
		input[type="date"]::-webkit-calendar-picker-indicator,
		input[type="datetime-local"]::-webkit-inner-spin-button,
		input[type="datetime-local"]::-webkit-calendar-picker-indicator {
			display: none;
			-webkit-appearance: none;
		}

		.container-step1 {
			padding: 16px;
		}

		.container {
			padding: 16px;
			display: none;
		}

		.form-input {
			margin: 0 auto;
			padding: 5px;
		}

		.input-field {
			font-size: 15px;
			line-height: 1.5;
			color: #4F4F4F;
			background: #F3F4F5;
			height: 50px;
			border-radius: 90px;
			padding: 12px 22px;
			width: 100%;
		}

		.submit-field {
			font-size: 15px;
			line-height: 1.5;
			color: #fff;
			background: #EB5757;
			height: 50px;
			border-radius: 90px;
			padding: 12px 22px;
			width: 100%;
		}

		::placeholder {
			color: #BDBDBD;
			opacity: 1;
		}

		.label-text {
			display: block;
			font-style: normal;
			font-weight: 400;
			font-size: 16px;
			line-height: 22px;
			color: #333333;
			margin-bottom: 8px;
		}

		.field {
			margin-bottom: 24px;
		}

		.field-icon {
			position: relative;
		}

		.img-calender-gender {
			position: absolute;
			right: 22px;
			top: 18px;
		}

		.icon {
			position: absolute;
			right: 22px;
			top: 22px;
		}

		.dob-gender,
		.major-doctor {
			display: flex;
			justify-content: space-between;
		}

		.dob,
		.gender,
		.major,
		.doctor {
			width: 49%;
		}

		.error {
			padding-left: 22px;
			color: #EB5757;
			font-size: 14px;
		}

		.scan-qr {
			display: flex;
			width: 100%;
			justify-content: space-between;
			align-items: center;
		}

		.fullname {
			width: 100%;
			margin-right: 12px;
		}

		.notify {
			position: absolute;
			bottom: 50px;
			width: 100%;
			text-align: center;
			display: none;
		}

		.notify-message {
			background-color: #EB5757;
			color: #fff;
			width: max-content;
			margin: 0 auto;
			padding: 12px 16px;
			border-radius: 100px;
		}

		.icon-scan:hover {
			cursor: pointer;
		}

		.container-scan {
			width: 100%;
			height: 100%;
			position: relative;
			display: none;
		}

		.container-scan .reader {
			margin: 0 auto;
			width: 100%;
			height: 100%;
		}

		.container-scan video {
			position: absolute;
			width: 100% !important;
			height: 100%;
			object-fit: cover;
		}

		.container-scan .notify-scan,
		.container-step1 .notify-step1 {
			position: absolute;
			bottom: 50px;
			width: 100%;
			text-align: center;
			display: none;
		}

		.container-scan .notify-message-scan,
		.container-step1 .notify-message-step1 {
			background-color: #EB5757;
			color: #fff;
			width: max-content;
			margin: 0 auto;
			padding: 12px 16px;
			border-radius: 100px;
		}

		.container-scan #qr-shaded-region div {
			background-color: #EB5757 !important;
		}

		.container-scan .icon-back {
			position: absolute;
			top: 20px;
			left: 20px;
		}

		.container-scan .icon-back:hover {
			cursor: pointer;
		}

		.hide-id-card,
		.hide-health-insurance,
		.hide-province,
		.hide-district,
		.hide-ward,
		.hide-street,
		.hide-tools {
			display: none;
		}

		.container-step1 .radio-button {
			margin-right: 20px;
			display: inline-flex;
			padding: 8px;
			align-items: center;
		}

		.container-step1 .radio-button input {
			margin-right: 8px;
		}

		.container-step1 input[type='radio'] {
			width: 10px;
			height: 10px;
			border-radius: 10px;
			border: 1px solid black;
			background-color: #fff;
			content: '';
			display: inline-block;
			visibility: visible;
		}

		.container-step1 input[type='radio']:after {
			width: 10px;
			height: 10px;
			border-radius: 10px;
			border: 1px solid black;
			background-color: #fff;
			content: '';
			display: inline-block;
			visibility: visible;
		}

		.container-step1 input[type='radio']:checked:after {
			width: 10px;
			height: 10px;
			border-radius: 10px;
			border: 1px solid #EB5757;
			background-color: #EB5757;
			content: '';
			display: inline-block;
			visibility: visible;
		}

		.input-textarea-field {
			font-size: 15px;
			line-height: 1.5;
			color: #4F4F4F;
			background: #F3F4F5;
			border-radius: 5px;
			border: none;
			padding: 12px 22px;
			width: 100%;
		}

		.input-textarea-field:focus {
			outline: 0;
		}

		input[type="date"].mobile:before {
			content: 'dd/mm/yyyy';
		}

		input[type="datetime-local"].mobile:before {
			content: 'dd/mm/yyyy,\ --:--';
		}

		input[type="button"]:hover {
			cursor: pointer;
		}
	</style>
</head>

<body>
	<div class="container-step1" id="container-step1">
		<div class="form-input" id="form-input">
			<div class="field">
				<label class="label-text">Chọn địa điểm khám bệnh</label>
				<div class="radio-button">
					<input type="radio" id="clinic1" name="clinic-location" value="Phòng khám Phú Đức">
					<label for="clinic1">Phòng khám Phú Đức</label>
				</div>
				<div class="radio-button">
					<input type="radio" id="clinic2" name="clinic-location" value="MiO Health">
					<label for="clinic2">MiO Health</label>
				</div>
				<div class="radio-button">
					<input type="radio" id="clinic3" name="clinic-location" value="Phòng khám Hoàn Mỹ">
					<label for="clinic3">Phòng khám Hoàn Mỹ</label>
				</div>
			</div>
			<div class="field">
				<label class="label-text">Chọn loại dịch vụ khám</label>
				<div class="radio-button">
					<input type="radio" id="typeService1" name="type-service" value="Khám ngoài giờ"
						onclick="onClickTypeServiceOther()">
					<label for="typeService1">Khám ngoài giờ</label>
				</div>
				<div class="radio-button">
					<input type="radio" id="typeService2" name="type-service" value="Khám trong giờ"
						onclick="onClickTypeServiceOther()">
					<label for="typeService2">Khám trong giờ</label>
				</div>
				<div class="radio-button">
					<input type="radio" id="typeService3" name="type-service" value="Khám online"
						onclick="onClickTypeService3()">
					<label for="typeService3">Khám online</label>
				</div>
			</div>
			<div class="field">
				<div class="major-doctor">
					<div class="major">
						<label class="label-text">Chuyên khoa</label>
						<div class="field-icon">
							<select class="input-field" id="major">
								<option value="" disabled selected>Chuyên khoa</option>
								<option value="major1">Chuyên khoa 1</option>
								<option value="major2">Chuyên khoa 2</option>
							</select>
							<img class="icon" src="images/ic_arrow_down.svg" alt="Icon Arrow Down" />
						</div>
					</div>
					<div class="doctor">
						<label class="label-text">Bác sĩ</label>
						<div class="field-icon">
							<select class="input-field" id="doctor">
								<option value="" disabled selected>Bác sĩ</option>
								<option value="doctor1">Bác sĩ 1</option>
								<option value="doctor2">Bác sĩ 2</option>
							</select>
							<img class="icon" src="images/ic_arrow_down.svg" alt="Icon Arrow Down" />
						</div>
					</div>
				</div>
			</div>
			<div class="field">
				<label class="label-text">Chọn ngày giờ khám</label>
				<div class="field-icon">
					<input class="input-field" type="datetime-local" id="datetime-check" name="datetime-check"
						min="1900-01-01" maxlength="10" onclick="this.showPicker();" onchange="onChangeDatetimeCheck()"
						required>
					<img class="img-calender-gender" onclick="document.getElementById('datetime-check').showPicker();"
						src="images/ic_calender.svg" alt="Icon Calender" />
				</div>
			</div>
			<div class="field hide-tools" id="hide-tools">
				<label class="label-text">Chọn công cụ khám</label>
				<div class="field-icon">
					<select class="input-field" id="tools">
						<option value="" disabled selected>Công cụ khám</option>
					</select>
					<img class="icon" src="images/ic_arrow_down.svg" alt="Icon Arrow Down" />
				</div>
			</div>
			<div class="field">
				<label class="label-text">Vấn đề sức khỏe cần khám</label>
				<textarea class="input-textarea-field" id="description" name="description" rows="4"
					placeholder="Nhập tình trạng sức khỏe của bạn, câu hỏi dành cho bác sĩ và các vấn đề sức khỏe cần khám"></textarea>
			</div>
			<div class="field">
				<input class="submit-field" type="button" name="next" value="Nhập thông tin bệnh nhân"
					onclick="onClickNext()">
			</div>
		</div>
		<div class="notify-step1" id="notify-step1">
			<div class="notify-message-step1" id="notify-message-step1"></div>
		</div>
	</div>
	<div class="container" id="container">
		<form class="form-input" id="form-input">
			<div class="field">
				<label class="label-text">Họ tên</label>
				<div class="scan-qr">
					<div class="fullname"><input class="input-field" type="text" id="fullname" name="fullname"
							placeholder="Họ tên" required autofocus></div>
					<div class="icon-scan" id="icon-scan" onclick="onClickScanQR()"><img src="images/ic_scan_qr.svg"
							alt="Icon Scan QR" /></div>
				</div>
			</div>
			<div class="field">
				<div class="dob-gender">
					<div class="dob">
						<label class="label-text">Ngày sinh</label>
						<div class="field-icon">
							<input class="input-field" type="date" id="birthdate" name="birthdate" min="1900-01-01"
								maxlength="10" onclick="this.showPicker();" onchange="onChangeBirthdate()" required>
							<img class="img-calender-gender"
								onclick="document.getElementById('birthdate').showPicker();"
								src="images/ic_calender.svg" alt="Icon Calender" />
						</div>
					</div>
					<div class="gender">
						<label class="label-text">Giới tính</label>
						<div class="field-icon">
							<select class="input-field" id="gender" style="z-index: 9999;" required>
								<option value="" disabled selected>Giới tính</option>
								<option value="Male">Nam</option>
								<option value="Female">Nữ</option>
								<option value="Other">Khác</option>
							</select>
							<img class="img-calender-gender" src="images/ic_gender.svg" alt="Icon Gender" />
						</div>
					</div>
				</div>
			</div>
			<div class="field">
				<label class="label-text">Số điện thoại</label>
				<input class="input-field" type="tel" id="phone" name="phone" placeholder="Số điện thoại"
					oninput="onInputPhone(this.value)">
				<label class="error" id="error-phone"></label>
			</div>
			<div class="field">
				<label class="label-text">Email</label>
				<input class="input-field" type="email" id="email" name="email" placeholder="Email">
			</div>
			<div class="field">
				<label class="label-text">Người giám hộ</label>
				<input class="input-field" type="text" id="guardian" name="guardian" placeholder="Người giám hộ">
			</div>
			<div class="field hide-id-card" id="hide-id-card">
				<label class="label-text">CMND/CCCD</label>
				<input class="input-field" type="text" id="idCard" name="idCard" placeholder="CMND/CCCD"
					oninput="onInputIdCard(this.value)">
				<label class="error" id="error-idcard"></label>
			</div>
			<div class="field hide-health-insurance" id="hide-health-insurance">
				<label class="label-text">BHYT</label>
				<input class="input-field" type="text" id="health-insurance" name="health-insurance" placeholder="BHYT">
			</div>
			<div class="field hide-province" id="hide-province">
				<label class="label-text">Tỉnh thành</label>
				<div class="field-icon">
					<select class="input-field" id="province" onchange="onSelect(1)">
						<option value="" disabled selected>Tỉnh thành</option>
					</select>
					<img class="icon" src="images/ic_arrow_down.svg" alt="Icon Arrow Down" />
				</div>
			</div>
			<div class="field hide-district" id="hide-district">
				<label class="label-text">Quận/Huyện</label>
				<div class="field-icon">
					<select class="input-field" id="district" onchange="onSelect(2)">
						<option value="" disabled selected>Quận/Huyện</option>
					</select>
					<img class="icon" src="images/ic_arrow_down.svg" alt="Icon Arrow Down" />
				</div>
			</div>
			<div class="field hide-ward" id="hide-ward">
				<label class="label-text">Xã/Phường</label>
				<div class="field-icon">
					<select class="input-field" id="ward">
						<option value="" disabled selected>Xã/Phường</option>
					</select>
					<img class="icon" src="images/ic_arrow_down.svg" alt="Icon Arrow Down" />
				</div>
			</div>
			<div class="field hide-street" id="hide-street">
				<label class="label-text">Đường/Số nhà</label>
				<input class="input-field" type="text" id="street" name="street" placeholder="Đường/Số nhà">
			</div>
			<div class="field">
				<input class="submit-field" type="submit" name="complete" value="Hoàn thành">
			</div>
		</form>
		<div class="notify" id="notify">
			<div class="notify-message" id="notify-message"></div>
		</div>
	</div>
	<div class="container-scan" id="container-scan">
		<div class="reader" id="reader"></div>
		<div class="notify-scan" id="notify-scan">
			<div class="notify-message-scan" id="notify-message-scan"></div>
		</div>
		<div class="icon-back" onclick="onClickBack()"><img src="images/ic_back.svg" alt="Icon Back" /></div>
	</div>
</body>

<script src="js/html5-qrcode.min.js"></script>

<script>
	const api_url = "https://patient-api.miohealth.vn/";
	const container_step1 = document.getElementById("container-step1");
	const container = document.getElementById("container");
	const container_scan = document.getElementById("container-scan");
	const selectProvince = document.getElementById("province");
	const selectDistrict = document.getElementById("district");
	const selectWard = document.getElementById("ward");
	const selectStreet = document.getElementById("street");
	const phoneRegex = new RegExp("^(?:[+0]9)?[0-9]{9,15}$");
	const idCardRegex9 = new RegExp("^(?:[+0]9)?[0-9]{9}$");
	const idCardRegex11 = new RegExp("^(?:[+0]9)?[0-9]{11}$");
	const errorphone = document.getElementById("error-phone");
	const erroridcard = document.getElementById("error-idcard");
	const icon_scan = document.getElementById("icon-scan");
	const icon_clear = document.getElementById("icon-clear");
	var form = document.getElementById("form-input");

	const notify = document.getElementById("notify");
	const notify_message = document.getElementById("notify-message");
	const notify_scan = document.getElementById("notify-scan");
	const notify_message_scan = document.getElementById("notify-message-scan");
	const notify_step1 = document.getElementById("notify-step1");
	const notify_message_step1 = document.getElementById("notify-message-step1");

	const hideIDCard = document.getElementById("hide-id-card");
	const hideHealthInsurance = document.getElementById("hide-health-insurance");
	const hideProvince = document.getElementById("hide-province");
	const hideDistrict = document.getElementById("hide-district");
	const hideWard = document.getElementById("hide-ward");
	const hideStreet = document.getElementById("hide-street");
	const hideTools = document.getElementById("hide-tools");

	const clinic_location = document.getElementsByName("clinic-location");
	const type_service = document.getElementsByName("type-service");
	const select_major = document.getElementById("major");
	const select_doctor = document.getElementById("doctor");
	const datetime_check = document.getElementById("datetime-check");


	var isMobile = false;

	window.addEventListener('load', () => {
		checkIsMobile();
		checkSession();
		setMaxDate();
		fetchAPI(api_url + "Province/GetAllLookup", selectProvince);
	});

	function handleForm(event) {
		if (errorphone.innerHTML != "" || erroridcard.innerHTML != "") {
			event.preventDefault();
		}
	}
	form.addEventListener('submit', handleForm);

	const html5QrCode = new Html5Qrcode("reader");
	let isScanning = false;
	const qrCodeSuccessCallback = (decodedText, decodedResult) => {
		if (!isScanning) {
			isScanning = true;
			scanQRCode(decodedText);
		}
	};
	const config = { fps: 60, qrbox: 300 };

	function onSelect(index) {
		if (index == 1) {
			resetSelectBox(selectWard);
			resetSelectBox(selectDistrict);
			fetchAPI(api_url + "District/GetAllLookup?provinceId=" + selectProvince.value, selectDistrict);
		} else {
			resetSelectBox(selectWard);
			fetchAPI(api_url + "Ward/GetAllLookup?districtId=" + selectDistrict.value, selectWard);
		}
	}

	function resetSelectBox(select) {
		select.value = select.options[0].value;
		for (var i = 1; i < select.length; i++) {
			select.remove(i);
			i--;
		}
	}

	function onInputPhone(value) {
		try {
			if (value.match(phoneRegex) || value == "") {
				errorphone.innerHTML = "";
			} else {
				errorphone.innerHTML = "Số điện thoại không hợp lệ";
			}
		} catch (e) {
			errorphone.innerHTML = "Số điện thoại không hợp lệ";
		}
	}

	function onInputIdCard(value) {
		try {
			if (value.match(idCardRegex9) || value.match(idCardRegex11) || value == "") {
				erroridcard.innerHTML = "";
			} else {
				erroridcard.innerHTML = "CMND/CCCD không hợp lệ";
			}
		} catch (e) {
			erroridcard.innerHTML = "CMND/CCCD không hợp lệ";
		}
	}

	function setMaxDate() {
		var today = new Date();
		var dd = today.getDate();
		var mm = today.getMonth() + 1; //January is 0!
		var yyyy = today.getFullYear();

		if (dd < 10) {
			dd = '0' + dd;
		}

		if (mm < 10) {
			mm = '0' + mm;
		}

		today = yyyy + '-' + mm + '-' + dd;
		document.getElementById("birthdate").setAttribute("max", today);
	}

	function onClickScanQR() {
		isScanning = false;
		container.style.display = "none";
		container_scan.style.display = "block";
		Html5Qrcode.getCameras().then(devices => {
			if (devices && devices.length) {
				var cameraId = devices[0].id;
				if (devices.length > 1) {
					cameraId = devices[1].id;
				}
				if (cameraId != "") {
					html5QrCode.start(cameraId, config, qrCodeSuccessCallback);
				} else {
					showNotifyMessage("Không tìm thấy camera");
				}
			}
		}).catch(err => {
			showNotifyMessage(err);
		});
	}

	function onClickBack() {
		container.style.display = "block";
		container_scan.style.display = "none";
		html5QrCode.stop();
	}

	function onClickNext() {
		var clinicName = "";
		for (var i = 0, length = clinic_location.length; i < length; i++) {
			if (clinic_location[i].checked) {
				clinicName = clinic_location[i].value;
				break;
			}
		}
		if (clinicName == "") {
			showNotifyMessage("Vui lòng chọn địa điểm khám bệnh");
			return;
		}

		var typeService = "";
		for (var i = 0, length = type_service.length; i < length; i++) {
			if (type_service[i].checked) {
				typeService = type_service[i].value;
				break;
			}
		}
		if (typeService == "") {
			showNotifyMessage("Vui lòng chọn loại dịch vụ khám");
			return;
		}

		if (select_major.value == "") {
			showNotifyMessage("Vui lòng chọn chuyên khoa");
			return;
		}

		if (select_doctor.value == "") {
			showNotifyMessage("Vui lòng chọn bác sĩ");
			return;
		}

		if (datetime_check.value == "") {
			showNotifyMessage("Vui lòng chọn ngày giờ");
			return;
		}

		container_step1.style.display = "none";
		container.style.display = "block";
	}

	function onClickTypeServiceOther() {
		hideTools.style.display = "none";
	}

	function onClickTypeService3() {
		hideTools.style.display = "block";
	}

	function showNotifyMessage(message) {
		notify_message.innerHTML = message;
		notify.style.display = "block";
		notify_message_scan.innerHTML = message;
		notify_scan.style.display = "block";
		notify_message_step1.innerHTML = message;
		notify_step1.style.display = "block";
		setTimeout(function () {
			notify_message.innerHTML = "";
			notify.style.display = "none";
			notify_message_scan.innerHTML = "";
			notify_scan.style.display = "none";
			notify_message_step1.innerHTML = "";
			notify_step1.style.display = "none";
			isScanning = false;
		}, 3000);
	}

	async function scanQRCode(data) {
		var body = { "data": data };
		try {
			const response = await fetch(api_url + "QRCode/GetInfo",
				{
					method: "POST",
					headers: {
						"accept": "application/json",
						"Content-Type": "application/json-patch+json",
					},
					body: JSON.stringify(body),
				});
			var resultJson = await response.json();
			var result = resultJson["result"];
			if (result == null) {
				await showNotifyMessage("Mã QR không hợp lệ");
			} else {
				switch (result.code) {
					case "HealthInsuranceCard":
						fillInfor(result.code, result.dataExtension);
						break;
					case "IDCard":
						fillInfor(result.code, result.dataExtension);
						break;
					default:
						await showNotifyMessage("Mã QR không hợp lệ");
				}
			}
		} catch (e) {
			await showNotifyMessage(e);
		}
	}

	function fillInfor(scanType, dataExtension) {
		if (scanType == "HealthInsuranceCard") {
			hideHealthInsurance.style.display = "block";
			document.getElementById("health-insurance").value = dataExtension.code;
		} else {
			hideIDCard.style.display = "block";
			document.getElementById("idCard").value = dataExtension.code;
		}
		hideProvince.style.display = "block";
		hideDistrict.style.display = "block";
		hideWard.style.display = "block";
		hideStreet.style.display = "block";
		document.getElementById("fullname").value = dataExtension.name;
		if (dataExtension.birthday != null) {
			document.getElementById("birthdate").classList.remove("mobile");
			setValueDate(dataExtension.birthday);
		}
		document.getElementById("gender").value = dataExtension.genderCode;
		if (dataExtension.address != null) {
			getAddressQR(dataExtension.address);
		}

		container.style.display = "block";
		container_scan.style.display = "none";
		html5QrCode.stop();
	}

	function setValueDate(value) {
		var date = new Date(value);
		var dd = date.getDate();
		var mm = date.getMonth() + 1;
		var yyyy = date.getFullYear();

		if (dd < 10) {
			dd = '0' + dd;
		}

		if (mm < 10) {
			mm = '0' + mm;
		}

		today = yyyy + '-' + mm + '-' + dd;
		document.getElementById("birthdate").value = today;
	}

	async function getAddressQR(addresses) {
		let address = addresses.split(",");
		if (address != null && address != "") {
			selectStreet.value = address[0].trim();
			if (address.length > 3) {
				await getDistrictWard(address[3].trim(), 1);
				if (address.length > 2) {
					await getDistrictWard(address[2].trim(), 2);
					if (address.length > 1) {
						getDistrictWard(address[1].trim(), 3);
					}
				}
			}
		}
	}

	async function getDistrictWard(selected, index) {
		if (index == 1) {
			for (var i = 0; i < selectProvince.length; i++) {
				if (selectProvince[i].text.includes(selected) || selected.includes(selectProvince[i].text)) {
					selectProvince.value = selectProvince[i].value;
					await fetchAPI(api_url + "District/GetAllLookup?provinceId=" + selectProvince.value, selectDistrict);
				}
			}
		} else if (index == 2) {
			for (var i = 0; i < selectDistrict.length; i++) {
				if (selectDistrict[i].text.includes(selected) || selected.includes(selectDistrict[i].text)) {
					selectDistrict.value = selectDistrict[i].value;
					await fetchAPI(api_url + "Ward/GetAllLookup?districtId=" + selectDistrict[i].value, selectWard);
				}
			}
		} else {
			for (var i = 0; i < selectWard.length; i++) {
				if (selectWard[i].text.includes(selected) || selected.includes(selectWard[i].text)) {
					selectWard.value = selectWard[i].value;
				}
			}
		}
	}

	async function fetchAPI(url, select) {
		try {
			resetSelectBox(select);
			const response = await fetch(url, {
				method: "GET",
				headers: {
					"accept": "application/json",
				},
			});
			var datalist = await response.json();
			var data = datalist["result"];
			for (key in data) {
				var option = document.createElement("option");
				option.value = data[key].id;
				option.text = data[key].name;
				select.add(option);
			}
		} catch (e) {
			showNotifyMessage(e);
		}
	}

	function setCookie(c_name, value, exdays) {
		var exdate = new Date();
		exdate.setDate(exdate.getDate() + exdays);
		var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
		document.cookie = c_name + "=" + c_value;
	}

	function getCookie(c_name) {
		var c_value = document.cookie;
		var c_start = c_value.indexOf(" " + c_name + "=");
		if (c_start == -1) {
			c_start = c_value.indexOf(c_name + "=");
		}
		if (c_start == -1) {
			c_value = null;
		} else {
			c_start = c_value.indexOf("=", c_start) + 1;
			var c_end = c_value.indexOf(";", c_start);
			if (c_end == -1) {
				c_end = c_value.length;
			}
			c_value = unescape(c_value.substring(c_start, c_end));
		}
		return c_value;
	}

	function checkSession() {
		var c = getCookie("visited");
		if (c === "no") {
			return;
		}
		if (c === "yes") {
			showNotifyMessage("Quét mã QR để điền thông tin");
			setCookie("visited", "no", null);
		} else {
			showNotifyMessage("Quét mã QR để điền thông tin");
			setCookie("visited", "yes", null);
		}
	}

	function checkIsMobile() {
		if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
			|| /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4))) {
			isMobile = true;
			document.getElementById("birthdate").classList.add("mobile");
			document.getElementById("datetime-check").classList.add("mobile");
		}
	}

	function onChangeBirthdate() {
		if (isMobile == true) {
			document.getElementById("birthdate").classList.remove("mobile");
		}
	}

	function onChangeDatetimeCheck() {
		if (isMobile == true) {
			document.getElementById("datetime-check").classList.remove("mobile");
		}
	}
</script>

</html>